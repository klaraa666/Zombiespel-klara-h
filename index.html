<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script src="simple.js">
//player info
var player1 = {x: 10, y:200, lives: 3};
var player2 = {x: totalWidth-20, y: 200, lives:3};
//Balls loop
var balls = [];
var i = 0;
while(i<20){
    balls.push({x: random(50, totalWidth),
            y: random(50, totalHeight),
            xSpeed: random(1,5),
            ySpeed: random(1,5)});

            i+=1;
}
            
function update() 
{
    fill("black")
    //players
    rectangle (player1.x, player1.y, 30, 30, "red");
    rectangle (player2.x, player2.y, 30, 30, "cornflowerblue");
    

    //line to separate game and hotbar
    rectangle(2, 50, 9000, 2,"white")


//while loop to creat balls
    i=0;
    while( i<20){
        var ball = balls[i]
        
        rectangle (balls[i].x, balls[i].y, 5, 5, "white")
  
        //makes ball move
        ball.x += ball.xSpeed;
        ball.y += ball.ySpeed;

        //ball bounce
        if(ball.y > totalHeight){
        ball.ySpeed = -ball.ySpeed;
        }
        if(ball.y < 50){
        ball.ySpeed = -ball.ySpeed;
        }
        if(ball.x < totalWidth){
        ball.xSpeed = -ball.xSpeed;
        }
        if(ball.x > 0){
        ball.xSpeed = -ball.xSpeed;

         //Makes player loose lives if collide with ball
         if(ball.x>player1.x && ball.y>player1.y&&ball.x<(player1.x+30)&&ball.y<(player1.y+30) ){
         player1.lives--;
         if (ball.x>player1.x){
         ball.xSpeed = -ball.xSpeed;
         }
         if (ball.x<player1.x){
         ball.xSpeed = -ball.xSpeed;
         }
         if (ball.y>player1.y){
            //ball.xSpeed = -ball.xSpeed;
             ball.ySpeed = -ball.ySpeed;
     }
         if (ball.y<player1.y){
             ball.ySpeed = -ball.ySpeed;
         }
       
     }
     //Collision and loosing lives
     if(ball.x>player2.x && ball.y>player2.y&&ball.x<(player2.x+30)&&ball.y<(player2.y+30)){
         player2.lives-=1;
         if (ball.x>player2.x){
         ball.xSpeed = -ball.xSpeed;

         }
         if (ball.x<player2.x){
         ball.xSpeed = -ball.xSpeed;
         }
         if (ball.y>player2.y){
             ball.ySpeed = -ball.ySpeed;
         }
         if (ball.y<player2.y){
             ball.ySpeed = -ball.ySpeed;
         }
     }
        }
        i+=1;
}

    //Keyboard controlls
    if (keyboard.w) {player1.y -=5}
    if (keyboard.s) {player1.y +=5}
    if (keyboard.a) {player1.x -=5}
    if (keyboard.d) {player1.x +=5}

    if (keyboard.up) {player2.y -=5}
    if (keyboard.down) {player2.y +=5}
    if (keyboard.left) {player2.x -=5}
    if (keyboard.right) {player2.x +=5}
  
    //Keeps player inside the screen
    if (player1.x > totalWidth-30){
        player1.x = totalWidth-30;
    }
    if (player1.x < 0){
        player1.x = 0;
    }
    if (player1.y > totalHeight-30){
        player1.y = totalHeight-30;
    }
    if (player1.y <50 )
    {
        player1.y = 50;
    }
    if (player2.x > totalWidth-30){
        player2.x = totalWidth-30;
    }
    if (player2.x < 0){
        player2.x = 0;
    }
    if (player2.y > totalHeight-30){
        player2.y = totalHeight-30;
    }
    if (player2.y <50 )
    {
        player2.y = 50;
    }


    //Makes Lives appear on top with 20 px space
    for (var i=0; i<player1.lives; i++){
        rectangle(30+20*i,20, 10,10, "red")
    }
    for (var i=0; i<player2.lives; i++){
        rectangle(totalWidth-(30+20*i),20, 10,10, "cornflowerblue")
    }
    //Win alert
    if (player1.lives == 0) {
       alert("Player Blue Won!")  
       stopUpdate();
    }
    if (player2.lives == 0) {
       alert("Player Red Won!")  
       stopUpdate();
    } 
    
}        
</script>
</body>
</html>